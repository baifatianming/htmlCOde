<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>万花筒</title>
	<style type="text/css">
		canvas{
			background: #E0E0E0;
		}
	</style>
	<script type="text/javascript">
		window.onload=function () {
			var canvas=document.getElementById("canvas");
			if (canvas==null) {
				return false;
			}
			var cobj=canvas.getContext("2d");
			cobj.translate(170,50);
			for (var i = 0; i < 100; i++) {
				cobj.translate(25,25);
				cobj.scale(0.95,0.95);
				cobj.rotate(Math.PI/10);
				cobj.fillStyle="rgba("+parseInt(Math.random()*255)+","+parseInt(Math.random()*255)+","+parseInt(Math.random()*255)+",0.6)";
				cobj.fillRect(0,0,100,50);
					
			};
			var two=document.getElementById("two");
			if (two==null) {
				return false;
			}
			var cobjt=two.getContext("2d");
			var arr=[];
			setInterval(function () {
				cobjt.clearRect(0,0,500,600);
				for (var i = 0; i < arr.length; i++) {
					cobjt.save();
					cobjt.translate(250,250);
					cobjt.scale(arr[i].scales,arr[i].scales);
					cobjt.rotate(arr[i].angle*Math.PI/180);
					cobjt.fillStyle=arr[i].color;
					cobjt.fillRect(arr[i].num,arr[i].num,50,50);
					cobjt.restore();
				};
				
			},100);
			setInterval(function () {
				for (var i = 0; i < arr.length; i++) {
					if (arr[i].num<=0) {
						arr.splice(i,1);
						continue;
					};
					arr[i].angle+=2;
					arr[i].num-=0.2;
					arr[i].scales-=0.002;
					if (arr[i].scales<=0.01) {
						arr[i].scales=0.01;
					};
				};
			},60);
			setInterval(function () {
				var rect={angle:0,num:150,scales:1,color:"rgb("+parseInt(Math.random()*255)+","+parseInt(Math.random()*255)+","+parseInt(Math.random()*255)+")",
				};
				arr.push(rect);
			},1000);
			var thr=document.getElementById("thr");
			if (thr==null) {
				return false;
			}
			var cobjtt=thr.getContext("2d");
			var arrr=[];
			setInterval(function () {
				cobjtt.clearRect(0,0,520,600);
				for (var i = 0; i < arrr.length; i++) {
					cobjtt.save();
					cobjtt.translate(263,250);
					cobjtt.scale(arrr[i].scales,arrr[i].scales);
					cobjtt.rotate(arrr[i].angle*Math.PI/180);
					cobjtt.fillStyle=arrr[i].color;
					cobjtt.fillRect(arrr[i].num,arrr[i].num,50,50);
					cobjtt.restore();
				};
				
			},100);
			setInterval(function () {
				for (var i = 0; i < arrr.length; i++) {
					if (arrr[i].num<=0) {
						arrr.splice(i,1);
						continue;
					};
					arrr[i].angle+=5;
					arrr[i].num-=0.2;
					arrr[i].scales-=0.002;
					if (arrr[i].scales<=0.01) {
						arrr[i].scales=0.01;
					};
				};
			},60);
			setInterval(function () {
				var rectt={angle:0,num:150,scales:1,color:"rgb("+parseInt(Math.random()*255)+","+parseInt(Math.random()*255)+","+parseInt(Math.random()*255)+")",
				};
				arrr.push(rectt);
			},1000);
		};
	</script>
</head>
<body>
	<canvas width="300" height="600" id="canvas"></canvas>
	<canvas width="500" height="600" id="two"></canvas>
	<canvas width="520" height="600" id="thr"></canvas>
</body>
</html>